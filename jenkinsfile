@Library('Utilities') _
pipeline {
    agent none
    stages {
        stage("Building Docker AMD Image") {
            agent {
                label 'node_v20.12.0_j11_amazonv3'
            }
            steps {
                script {
                    commonProperties.checkoutToSubdirectory(dir: 'assets')
                    nodeWorkflow.call(file: 'assets/config.yaml')
                }
            }
        }
        stage("Building Docker ARM Image") {
            agent {
                label 'node_v20.12.0_j11_arm_amazonv3'
            }
             steps {
                script {
                    commonProperties.checkoutToSubdirectory(dir: 'assets')
                    nodeWorkflow.call(file: 'assets/config-arm64-nodeworkflow.yaml')
                   // commonProperties.checkoutToSubdirectory(dir: 'assets')
                    dockerArmWorkflow.call(file: 'assets/config-arm64-dockerarmworkflow.yaml', appName: 'warden')
                }
            }
        }
    }
}